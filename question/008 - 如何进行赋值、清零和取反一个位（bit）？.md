<https://stackoverflow.com/questions/47981/how-do-you-set-clear-and-toggle-a-single-bit>

## 问题

在 C/C++ 中，如何进行位操作？

## 最佳回答

#### 位置 1（set）

用`|`操作符来赋值一个位，

```c++
number |= 1UL << n;
```

这段代码是将`number`的第`n`位赋为 1。注意，n 是从 0 开始的。

如果`number`的大小大于`unsigned long`，就需要把`1UL`换成`1ULL`。

#### 位置 0（clear）

用`&`操作符来清零一个位，

```c++
number &= ~(1UL << n);
```

将`number`的第`n`位赋为 0。

#### 位置反（toggle）

用`^`操作符来置反一个位（即 0 变 1，1 变 0），

```c++
number ^= 1UL << n;
```

将`number`的第`n`位置反。

#### 位检查（check）

（你虽然没问这个，但我觉得还是有必要写下。）

```c++
bit = (number >> n) & 1U;
```

先将`number`右移 n 位，然后和 1 进行与操作，得到的值赋给变量 bit。

#### 根据另一个变量来置位

```c++
number ^= (-x ^ number) & (1UL << n);
```

如果 x 等于 1，就把 number 的第 n 位置为 1，如果 x 等于 0，就把 number 的第 n 位置为 0。

如果 x 等于其它数，结果未知。当然你可以使用逻辑运算符`!`来把 x 置 0 或 1（布尔化）。

```c++
x = !!x;
```






