<https://stackoverflow.com/questions/6438086/iterator-invalidation-rules>

## 问题

C++ 容器的迭代器失效有哪些情况？

## 回答

以下内容根据 C++ 17 标准而来。

### 插入操作

- 顺序容器（Sequence Containers）
  - `vector`：`insert`, `emplace_back`, `emplace`, `push_back` 可能会造成数组析构并重新分配内存，这个时候会造成所有的迭代器和引用失效；相反，如果不会重新分配内存，那么还可以继续用。不管是什么操作，只要数组被重新分配内存，那么迭代器和引用就会失效。
  - `deque`：如果在中间插入，则会使所有的迭代器和引用失效；如果在尾部和头部插入，则只会使迭代器失效，而引用不会。
  
